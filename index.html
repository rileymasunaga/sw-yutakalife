<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-45347730-3"></script>
    <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-45347730-3');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Yutaka-Life">
    <link rel="shortcut icon" href="bb-fav.ico" />
    <title>BACKBURNER</title>
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="custom.css" rel="stylesheet">
</head>

<body>
    <div class="container ">
        <!-- start page -->
        <div class="row" id="start">
            <div class="col-sm-8">
                <div class="spacer"> </div>
                <img class="logo" src="backburner.png">
                <div class="form-group">
                    <p>Backburner is an interruption based tool that helps you retain what you study. </p>
                    <p>How would you rate your familiarity with the Korean language:</p>
                    <select id="rating">
                        <option value="1">1 - I am not familar with</option>
                        <option value="2">2</option>
                        <option value="3">3 - I am somewhat familiar with Korean</option>
                        <option value="4">4</option>
                        <option value="5">5 - I am very familiar with Korean</option>
                    </select>
                </div>
                <button class="btn-burn" onclick="start();">START</button>
            </div>
        </div>
        <!-- thankyou page -->
        <div class="row hide" id="thankyou">
            <div class="col-sm">
                <div class="spacer"> </div>
                <h1>Thank you for your participation.</h1>
                <p> You are not eligible to participate. </p>
            </div>
        </div>
        <!-- page2 -->
        <div class="row hide" id="page2">
            <div class="col-sm">
                <div class="spacer"> </div>
                <h1>ここまでっ！</h1>
                <a id="end">
                    <button class="btn-burn" onclick="restart();hide();">CONTINUE</button>
                </a>
            </div>
        </div>
        <!-- Youtube-content -->
        <div class="row">
            <div class="col-sm">
                <div class="embed-responsive embed-responsive-16by9">
                    <div id="player" class="hide">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Content -->
    <script>
    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var player;

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '390',
            width: '640',
            videoId: '9p0IJsrVkEU',
            playerVars: { 'controls': 1, 'showinfo': 0, 'rel': 0, end: '112', },
            events: {
                'onStateChange': onPlayerStateChange
            }
        });
    }

    // 4. The API will call this function when the video player is ready.

    // 5. The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    var done = false;

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.ENDED) {
            end();
            done = true;
        }
    }

    //    Show: Display Iframe, hide start page elements
    function show() {
        var video = document.getElementById("player");
        video.classList.add("show");
        var start = document.getElementById("start");
        start.classList.add("hide");
    }
    //Hide: Hide player, show end screen
    var showtime;

    function hide() {
        showtime = setTimeout(
            function() {
                var video = document.getElementById("player");

                var element = document.getElementById("page2");
                video.classList.remove("show");
                element.classList.add("show");
            }, 30000);
    }
    // Restart, show player, hide end screen
    function restart() {
        var video = document.getElementById("player");

        video.classList.add("show");
        var page2 = document.getElementById("page2");
        page2.classList.add("hide");
        page2.classList.remove("show");
    }
    //End, Clear timer and show end screen. 
    function end() {
        clearTimeout(showtime);
        var video = document.getElementById("player");
        var element = document.getElementById("page2");
        var endbutton = document.getElementById("end");
        video.classList.remove("show");
        element.classList.add("show");
        endbutton.setAttribute("onclick", "");
        endbutton.setAttribute("href", "distraction.html");
        setTimeout(function() { window.location.replace('distraction.html'); }, 7000);

    }

    function start() {
        var familiarity = document.getElementById("rating").value;
        if (familiarity < 4) {
            hide();show();
        }
        else{
        var thankyou = document.getElementById("thankyou");
        var start = document.getElementById("start");
        thankyou.classList.add("show");
        start.classList.add("hide");}
    }
    </script>
</body>

</html>